{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "icon-picker-virtualized",
  "type": "registry:block",
  "title": "Icon Picker Virtualized",
  "description": "A simple icon picker component with virtualization.",
  "dependencies": [
    "lucide-react",
    "react-virtualized"
  ],
  "devDependencies": [
    "@types/react-virtualized"
  ],
  "registryDependencies": [
    "input",
    "scroll-area"
  ],
  "files": [
    {
      "path": "registry/icon-picker/icon-picker-virtualized.tsx",
      "content": "\"use client\";\n\nimport { icons } from \"lucide-react\";\nimport { useState, useMemo, useCallback, memo, useRef, useEffect } from \"react\";\nimport { Grid, AutoSizer } from \"react-virtualized\";\n\nimport { Input } from \"@/components/ui/input\";\n\nconst IconItem = memo(\n  ({\n    iconName,\n    onSelectIcon,\n  }: {\n    iconName: string;\n    onSelectIcon?: (iconName: string) => void;\n  }) => {\n    const Icon = icons[iconName as keyof typeof icons];\n\n    const handleClick = useCallback(() => {\n      onSelectIcon?.(iconName);\n    }, [iconName, onSelectIcon]);\n\n    return (\n      <button\n        className=\"flex items-center justify-center size-7 rounded-md cursor-pointer text-popover-foreground/75 hover:bg-muted hover:text-primary\"\n        onClick={handleClick}\n        title={iconName}\n      >\n        <Icon size={16} />\n      </button>\n    );\n  },\n);\n\nIconItem.displayName = \"IconItem\";\n\nconst IconPicker = memo(\n  ({ onSelectIcon }: { onSelectIcon?: (iconName: string) => void }) => {\n    const [searchQuery, setSearchQuery] = useState(\"\");\n    const gridRef = useRef<Grid | null>(null);\n\n    const iconsMap = useMemo(() => Object.keys(icons), []);\n\n    const filteredIcons = useMemo(() => {\n      if (!searchQuery.trim()) return iconsMap;\n      return iconsMap.filter((iconName) =>\n        iconName.toLowerCase().includes(searchQuery.toLowerCase()),\n      );\n    }, [iconsMap, searchQuery]);\n\n    useEffect(() => {\n      if (gridRef.current) {\n        gridRef.current.recomputeGridSize();\n      }\n    }, [filteredIcons]);\n\n    const handleSearchChange = useCallback(\n      (e: React.ChangeEvent<HTMLInputElement>) => {\n        setSearchQuery(e.target.value);\n      },\n      [],\n    );\n\n    const ICON_CELL_SIZE = 28;\n    const COLUMNS = 9;\n\n    const cellRenderer = useCallback(\n      ({\n        columnIndex,\n        rowIndex,\n        style,\n      }: {\n        columnIndex: number;\n        rowIndex: number;\n        style: React.CSSProperties;\n      }) => {\n        const index = rowIndex * COLUMNS + columnIndex;\n        if (index >= filteredIcons.length) return null;\n\n        const iconName = filteredIcons[index];\n\n        return (\n          <div style={style} key={iconName}>\n            <IconItem iconName={iconName} onSelectIcon={onSelectIcon} />\n          </div>\n        );\n      },\n      [filteredIcons, onSelectIcon],\n    );\n\n    return (\n      <div className=\"w-72 bg-popover rounded-lg border shadow-md\">\n        <div className=\"relative px-2 pt-2\">\n          <Input\n            autoComplete=\"off\"\n            autoCorrect=\"off\"\n            autoCapitalize=\"off\"\n            spellCheck={false}\n            className=\"border-none focus-visible:ring-2 font-semibold px-2.5 py-2\"\n            placeholder=\"Search...\"\n            type=\"text\"\n            value={searchQuery}\n            onChange={handleSearchChange}\n          />\n        </div>\n        <div className=\"h-80 p-1.5\">\n          <AutoSizer>\n            {({ width, height }: { width: number; height: number }) => {\n              const rowCount = Math.ceil(filteredIcons.length / COLUMNS);\n              return (\n                <Grid\n                  ref={gridRef}\n                  cellRenderer={cellRenderer}\n                  columnCount={COLUMNS}\n                  columnWidth={ICON_CELL_SIZE}\n                  height={height}\n                  rowCount={rowCount}\n                  rowHeight={ICON_CELL_SIZE}\n                  width={width}\n                  overscanRowCount={10}\n                  className=\"focus:outline-none\"\n                />\n              );\n            }}\n          </AutoSizer>\n        </div>\n      </div>\n    );\n  },\n);\n\nIconPicker.displayName = \"IconPicker\";\n\nexport default IconPicker;\n",
      "type": "registry:component"
    }
  ]
}